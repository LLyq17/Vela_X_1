#! /bin/sh
##----------------initial_period-----------------##
pini=283.3966
function getperiod()
{
file=$1
outfile=$2
efsearch cfile1=$file window="-" sepoch=INDEF dper=$pini nphase=120 nbint=indef nper=1024 dres=0.005 outfile=$outfile plot=no

}
ObsID=("P020101214106-20191102-01-01" "P020101214107-20191103-02-01" "P020101214108-20191103-02-01" "P020101214209-20191121-02-01" "P020101214210-20191121-02-01" "P020101214301-20191215-01-01" "P020101214302-20191216-02-01" "P020101214401-20191216-01-01" "P020101214402-20191216-01-01" "P020101214403-20191217-02-01" "P020101214405-20191217-02-01" "P020101214501-20200103-01-01" "P020101214503-20200103-01-01" "P020101214504-20200103-01-01" "P020101214508-20200104-02-01" "P020101214509-20200104-02-01" "P020101214510-20200104-02-01" "P020101214511-20200104-02-01" "P020101214704-20200122-01-01" "P020101214705-20200122-01-01" "P020101214706-20200122-01-01" "P020101214707-20200122-01-01" "P020101214708-20200123-02-01" "P020101214709-20200123-02-01" "P020101214711-20200123-02-01" "P020101214803-20200207-01-01" "P020101214901-20200322-01-01" "P020101214903-20200322-01-01" "P020101214906-20200323-02-01" "P020101214910-20200323-02-01" "P020101214911-20200323-02-01" "P020101214912-20200323-02-01" "P020101214913-20200323-02-01" "P020101214914-20200324-03-01" "P020101214915-20200324-03-01" "P020101215002-20200421-02-01" "P020101215103-20200617-01-01" "P020101215203-20200623-01-01")

ID=0
while [ "$ID" -lt "38" ]
do
outputID=${ObsID[$ID]}

path1=/home/lq/hxmt/Vela_X-1/P0201012_v204/Period/${outputID}/
path2=`pwd`
filelist=`ls $path1`
mkdir -p ${outputID}/
cd ${outputID}/
newp1=$path1
input1=$newp1/helc_g0_0-17.lc
input2=$newp1/melc_g0_0-53.lc
input3=$newp1/lelc_g0_0-94.lc
getperiod $input1 ME
getperiod $input2 HE
getperiod $input3 LE
cd ../

let "ID+=1"
done
